<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>前端作品列表</title>
    <link rel="shortcut  icon" type="image/x-icon" href="favicon.ico" media="screen"/>
    <link rel="stylesheet" href="stylesheets/main/index.css">
</head>
<body>
<div class="main">
    <div class="wrap shadow">
        <ol id="ol"></ol>
    </div>
    <div class="leftTime">
        <iframe src="demos/canvas.html" width="400" height="350" frameborder="false" scrolling="no" style="border:none;" allowtransparency="true"></iframe>
        <p id="getTime"></p>
        <p id="weather"></p>
        <p id="getWorkDay"></p>
    </div>
</div>
<script src="js/jquery.min.js"></script>
<script>
    (function(){
        var str = '',
                data = [
                    [
                        {title : '第一章 图片轮播'},
                        {url : 'demos/imgLunBo.html', title : '图片自动轮播'},
                        {url : 'demos/clickLunBo.html', title : '图片点击轮播'}
                    ],
                    [
                        {title : '第二章 css样式案例'},
                        {url : 'demos/snow.html', title : '雪花效果'}
                    ],
                    [
                        {title : '第三章 javascript案例'},
                        {url : 'demos/times.html', title : '九九乘法表打印'}
                    ],
                    [
                        {title : '第四章 vue.js案例'},
                        {url : '#', title : 'testFore'}
                    ],
                    [
                        {title : '第五章 vue.js案例'},
                        {url : '#', title : 'testFore'}
                    ],
                    [
                        {title : '第六章 vue.js案例'},
                        {url : '#', title : 'testFore'}
                    ],
                    [
                        {title : '第七章 vue.js案例'},
                        {url : '#', title : 'testFore'}
                    ]
                ];
        for(var i = 0; i < data.length; i++){
            var items = data[i];
            var sub = '';
            for(var j = 0; j < items.length; j++){
                var son = items[j];
                if(j ==0){
                    sub += '<li><h1><a href="javascript:;" title="'+ son.title +'">'+ son.title +'</a></h1><dl class="sub-dl">';
                }else{
                    sub += '<dd><a href="'+ son.url +'" title="'+ son.title +'">' + son.title +'</a></dd>';
                }
                if(j == items.length - 1){
                    sub += '</dl></li>';
                }
            }
            str += sub;
        }
        var ol = document.getElementById('ol');
        ol.innerHTML = str;
        var h1 = ol.getElementsByTagName('h1');
        var dl = ol.getElementsByTagName('dl');
        var tmp = -1;
        var open = false;
        for(var i = 0; i < h1.length; i++){
            h1[i].index = i;
            h1[i].onclick = function(){
                for(var i = 0; i < h1.length; i++){
                    dl[i].style.display = 'none';
                }
                if(tmp == this.index && open){
                    dl[this.index].style.display = 'none';
                    open = false;
                }else{
                    dl[this.index].style.display = 'block';
                    open = true;
                }
                tmp = this.index;
            }
        };
        getTime();
        swithDay();
        findWeather();
        function getTime(){
            var date = new Date();
            var year = date.getFullYear();
            var month = date.getMonth() + 1;
            var day = date.getDate();
            var hours = date.getHours();
            var minutes = date.getMinutes();
            var getTimes = year + '年' + month + '月' + day +'日' + '-' + hours + ':' + minutes;
            $('#getTime').text(getTimes);
        };
        function swithDay() {
            var date = new Date().getDay();
            switch (date){
                case 0:
                    info = '今天是周日';
                    break;
                case 1:
                    info = '今天是周一';
                    break;
                case 2:
                    info = '今天是周二';
                    break;
                case 3:
                    info = '今天是周三';
                    break;
                case 4:
                    info = '今天是周四';
                    break;
                case 5:
                    info = '今天是周五';
                    break;
                case 6:
                    info = '今天是周六';
                    break;
            };
            $('#getWorkDay').text(info);
        };
        function findWeather() {
            var cityUrl = 'http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js';
            $.getScript(cityUrl, function(script, textStatus, jqXHR) {
                var citytq = remote_ip_info.city ;// 获取城市
                var url = "http://php.weather.sina.com.cn/iframe/index/w_cl.php?code=js&city=" + citytq + "&day=0&dfc=3";
                $.ajax({
                    url : url,
                    dataType : "script",
                    scriptCharset : "gbk",
                    success : function(data) {
                        var _w = window.SWther.w[citytq][0];
                        var _f= _w.f1+"_0.png";
                        if(new Date().getHours() > 17){
                            _f= _w.f2+"_1.png";
                        }
                        var img = "<img width='16px' height='16px' src='http://i2.sinaimg.cn/dy/main/weather/weatherplugin/wthIco/20_20/" +_f
                                + "' />";
                        var tq = citytq + " " + img + " " + _w.s1 + " " + _w.t1 + "℃～" + _w.t2 + "℃  " + _w.d1 + _w.p1 + "级";
                        //#weather自己修改,天气样式自己打断点调试
                        $('#weather').html(tq);
                    }
                });
            });
        }
    })();

</script>
</body>
</html>